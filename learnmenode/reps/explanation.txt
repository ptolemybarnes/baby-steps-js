

 LEARN YOU THE NODE.JS FOR MUCH WIN!
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 HTTP FILE SERVER
 Exercise 11 of 13

Write an HTTP server that serves the same text file for each request it receives.

Your server should listen on the port provided by the first argument to your program.

You will be provided with the location of the file to serve as the second command-line argument. You must use the fs.createReadStream() method to stream the file contents to the response.

-------------------------------------------------------------------------------

## HINTS

Because we need to create an HTTP server for this exercise rather than a generic TCP server, we should use the http module from Node core. Like the net module, http also has a method named http.createServer() but this one creates a server that can talk HTTP.

http.createServer() takes a callback that is called once for each connection received by your server. The callback function has the signature:

    [94mfunction[39m [37mcallback[39m [90m([39m[37mrequest[39m[32m,[39m [37mresponse[39m[90m)[39m [33m{[39m [90m/* ... */[39m [33m}[39m

Where the two arguments are objects representing the HTTP request and the corresponding response for this request. request is used to fetch properties, such as the header and query-string from the request while response is for sending data to the client, both headers and body.

Both request and response are also Node streams! Which means that you can use the streaming abstractions to send and receive data if they suit your use-case.

http.createServer() also returns an instance of your server. You must call server.listen(portNumber) to start listening on a particular port.

A typical Node HTTP server looks like this:

    [32mvar[39m [37mhttp[39m [93m=[39m [37mrequire[39m[90m([39m[92m'http'[39m[90m)[39m
    [32mvar[39m [37mserver[39m [93m=[39m [37mhttp[39m[32m.[39m[37mcreateServer[39m[90m([39m[94mfunction[39m [90m([39m[37mreq[39m[32m,[39m [37mres[39m[90m)[39m [33m{[39m
      [90m// request handling logic...[39m
    [33m}[39m[90m)[39m
    [37mserver[39m[32m.[39m[37mlisten[39m[90m([39m[34m8000[39m[90m)[39m

Documentation on the http module can be found by pointing your browser here:
  file:///usr/local/lib/node_modules/learnyounode/node_apidoc/http.html

The fs core module also has some streaming APIs for files. You will need to use the fs.createReadStream() method to create a stream representing the file you are given as a command-line argument. The method returns a stream object which you can use src.pipe(dst) to pipe the data from the src stream to the dst stream. In this way you can connect a filesystem stream with an HTTP response stream.

-------------------------------------------------------------------------------

 Â» To print these instructions again, run: learnyounode print
 Â» To execute your program in a test environment, run: learnyounode run program.js
 Â» To verify your program, run: learnyounode verify program.js
 Â» For help run: learnyounode help


